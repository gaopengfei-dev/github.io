<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>拓甫网络科技</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/quickly_system/img/logo1.png">
    <link rel="stylesheet" href="/quickly_system/css/style.css">
    <script src="https://webapi.amap.com/maps?v=1.4.15&amp;key=15288c122e1eb8ff4cf2ecc8effe60fc&amp;plugin=Map3D,AMap.DistrictSearch,AMap.Driving,AMap.ControlBar,AMap.MarkerClusterer,AMap.PolyEditor,AMap.Scale,AMap.MouseTool"></script>
    <script src="https://a.amap.com/jsapi_demos/static/demo-center/js/demoutils.js"></script>
    <script src="https://a.amap.com/jsapi_demos/static/resource/heatmapData.js"></script>
    <script src="http://api.map.baidu.com/api?v=1.0&amp;type=webgl&amp;ak=Gz8sCbpgXv50dulcR4rPTA7VanWIleFf"></script>
    <script src="https://unpkg.com/mapvgl/dist/mapvgl.min.js"></script>
    <script src="https://unpkg.com/mapvgl/dist/mapvgl.threelayers.min.js"></script>
    <link rel="stylesheet" href="https://mapopen.cdn.bcebos.com/github/BMapGLLib/DrawingManager/src/DrawingManager.min.css">
    <script src="https://mapopen.cdn.bcebos.com/github/BMapGLLib/DrawingManager/src/DrawingManager.min.js"></script>
    <meta name="description" content="技术平台">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/quickly_system/assets/css/0.styles.40d4803a.css" as="style"><link rel="preload" href="/quickly_system/assets/js/app.e19d83fd.js" as="script"><link rel="preload" href="/quickly_system/assets/js/4.e9443f23.js" as="script"><link rel="preload" href="/quickly_system/assets/js/33.87f72572.js" as="script"><link rel="prefetch" href="/quickly_system/assets/js/1.894cf447.js"><link rel="prefetch" href="/quickly_system/assets/js/10.beeaf568.js"><link rel="prefetch" href="/quickly_system/assets/js/100.c8916f21.js"><link rel="prefetch" href="/quickly_system/assets/js/101.4ec407e4.js"><link rel="prefetch" href="/quickly_system/assets/js/102.9680c682.js"><link rel="prefetch" href="/quickly_system/assets/js/103.d57c07c1.js"><link rel="prefetch" href="/quickly_system/assets/js/104.d27e9672.js"><link rel="prefetch" href="/quickly_system/assets/js/105.33edf407.js"><link rel="prefetch" href="/quickly_system/assets/js/106.1d528f9f.js"><link rel="prefetch" href="/quickly_system/assets/js/107.3daab79f.js"><link rel="prefetch" href="/quickly_system/assets/js/108.492e18c9.js"><link rel="prefetch" href="/quickly_system/assets/js/109.d62b26f2.js"><link rel="prefetch" href="/quickly_system/assets/js/11.5916e2a4.js"><link rel="prefetch" href="/quickly_system/assets/js/12.64106a3c.js"><link rel="prefetch" href="/quickly_system/assets/js/13.5803065f.js"><link rel="prefetch" href="/quickly_system/assets/js/14.c5cfccc7.js"><link rel="prefetch" href="/quickly_system/assets/js/15.eddb4f5e.js"><link rel="prefetch" href="/quickly_system/assets/js/16.c07608bb.js"><link rel="prefetch" href="/quickly_system/assets/js/17.e28922bb.js"><link rel="prefetch" href="/quickly_system/assets/js/18.6e4650df.js"><link rel="prefetch" href="/quickly_system/assets/js/19.7d9cb879.js"><link rel="prefetch" href="/quickly_system/assets/js/20.894b6c09.js"><link rel="prefetch" href="/quickly_system/assets/js/21.34f8d046.js"><link rel="prefetch" href="/quickly_system/assets/js/22.b4cc06a5.js"><link rel="prefetch" href="/quickly_system/assets/js/23.a7ef50f8.js"><link rel="prefetch" href="/quickly_system/assets/js/24.477d31f9.js"><link rel="prefetch" href="/quickly_system/assets/js/25.de8def22.js"><link rel="prefetch" href="/quickly_system/assets/js/26.ba7f5d87.js"><link rel="prefetch" href="/quickly_system/assets/js/27.58c6dfb3.js"><link rel="prefetch" href="/quickly_system/assets/js/28.dfeb46f9.js"><link rel="prefetch" href="/quickly_system/assets/js/29.a91e19b4.js"><link rel="prefetch" href="/quickly_system/assets/js/3.deb27f6d.js"><link rel="prefetch" href="/quickly_system/assets/js/30.5febe1bc.js"><link rel="prefetch" href="/quickly_system/assets/js/31.f0bc83d8.js"><link rel="prefetch" href="/quickly_system/assets/js/32.ded5eae7.js"><link rel="prefetch" href="/quickly_system/assets/js/34.41dbd6d0.js"><link rel="prefetch" href="/quickly_system/assets/js/35.73e71a0c.js"><link rel="prefetch" href="/quickly_system/assets/js/36.c5c62c0a.js"><link rel="prefetch" href="/quickly_system/assets/js/37.9393612c.js"><link rel="prefetch" href="/quickly_system/assets/js/38.9797b7b2.js"><link rel="prefetch" href="/quickly_system/assets/js/39.97f8c4a6.js"><link rel="prefetch" href="/quickly_system/assets/js/40.bff5b6c4.js"><link rel="prefetch" href="/quickly_system/assets/js/41.6cd8fd81.js"><link rel="prefetch" href="/quickly_system/assets/js/42.862877d1.js"><link rel="prefetch" href="/quickly_system/assets/js/43.c4efda04.js"><link rel="prefetch" href="/quickly_system/assets/js/44.bb281e85.js"><link rel="prefetch" href="/quickly_system/assets/js/45.d12f449c.js"><link rel="prefetch" href="/quickly_system/assets/js/46.12394d2c.js"><link rel="prefetch" href="/quickly_system/assets/js/47.e38f82eb.js"><link rel="prefetch" href="/quickly_system/assets/js/48.08eb1d61.js"><link rel="prefetch" href="/quickly_system/assets/js/49.4c84cc95.js"><link rel="prefetch" href="/quickly_system/assets/js/5.8ee143d1.js"><link rel="prefetch" href="/quickly_system/assets/js/50.bef6cafc.js"><link rel="prefetch" href="/quickly_system/assets/js/51.5de93139.js"><link rel="prefetch" href="/quickly_system/assets/js/52.93a9155e.js"><link rel="prefetch" href="/quickly_system/assets/js/53.90ebc736.js"><link rel="prefetch" href="/quickly_system/assets/js/54.ae97b814.js"><link rel="prefetch" href="/quickly_system/assets/js/55.763c42f1.js"><link rel="prefetch" href="/quickly_system/assets/js/56.7dd797d3.js"><link rel="prefetch" href="/quickly_system/assets/js/57.0bc0a9d7.js"><link rel="prefetch" href="/quickly_system/assets/js/58.6f0fad19.js"><link rel="prefetch" href="/quickly_system/assets/js/59.76ed7fb7.js"><link rel="prefetch" href="/quickly_system/assets/js/6.3d17f699.js"><link rel="prefetch" href="/quickly_system/assets/js/60.08f31a1e.js"><link rel="prefetch" href="/quickly_system/assets/js/61.315a4127.js"><link rel="prefetch" href="/quickly_system/assets/js/62.1c858bf8.js"><link rel="prefetch" href="/quickly_system/assets/js/63.c26bfb66.js"><link rel="prefetch" href="/quickly_system/assets/js/64.d6509471.js"><link rel="prefetch" href="/quickly_system/assets/js/65.9871e2ce.js"><link rel="prefetch" href="/quickly_system/assets/js/66.c622d743.js"><link rel="prefetch" href="/quickly_system/assets/js/67.b4dcecca.js"><link rel="prefetch" href="/quickly_system/assets/js/68.30b69532.js"><link rel="prefetch" href="/quickly_system/assets/js/69.a80020ee.js"><link rel="prefetch" href="/quickly_system/assets/js/7.2eedd02a.js"><link rel="prefetch" href="/quickly_system/assets/js/70.73f45d6e.js"><link rel="prefetch" href="/quickly_system/assets/js/71.e97db237.js"><link rel="prefetch" href="/quickly_system/assets/js/72.ab8bb20f.js"><link rel="prefetch" href="/quickly_system/assets/js/73.8c7973e3.js"><link rel="prefetch" href="/quickly_system/assets/js/74.65dc70ac.js"><link rel="prefetch" href="/quickly_system/assets/js/75.7973881a.js"><link rel="prefetch" href="/quickly_system/assets/js/76.5a89d43e.js"><link rel="prefetch" href="/quickly_system/assets/js/77.729582ff.js"><link rel="prefetch" href="/quickly_system/assets/js/78.7427c02c.js"><link rel="prefetch" href="/quickly_system/assets/js/79.1ac5f277.js"><link rel="prefetch" href="/quickly_system/assets/js/8.84fae640.js"><link rel="prefetch" href="/quickly_system/assets/js/80.40db0de5.js"><link rel="prefetch" href="/quickly_system/assets/js/81.208d0fac.js"><link rel="prefetch" href="/quickly_system/assets/js/82.823639ff.js"><link rel="prefetch" href="/quickly_system/assets/js/83.c5f30463.js"><link rel="prefetch" href="/quickly_system/assets/js/84.f20ea765.js"><link rel="prefetch" href="/quickly_system/assets/js/85.4aaaa959.js"><link rel="prefetch" href="/quickly_system/assets/js/86.b06d96de.js"><link rel="prefetch" href="/quickly_system/assets/js/87.3ef12869.js"><link rel="prefetch" href="/quickly_system/assets/js/88.9cac0484.js"><link rel="prefetch" href="/quickly_system/assets/js/89.abe6dae2.js"><link rel="prefetch" href="/quickly_system/assets/js/9.bbcd5991.js"><link rel="prefetch" href="/quickly_system/assets/js/90.3104af1a.js"><link rel="prefetch" href="/quickly_system/assets/js/91.625e2a52.js"><link rel="prefetch" href="/quickly_system/assets/js/92.28ae99b0.js"><link rel="prefetch" href="/quickly_system/assets/js/93.bbf305cb.js"><link rel="prefetch" href="/quickly_system/assets/js/94.4b27dc34.js"><link rel="prefetch" href="/quickly_system/assets/js/95.42a7d1c8.js"><link rel="prefetch" href="/quickly_system/assets/js/96.77f535a8.js"><link rel="prefetch" href="/quickly_system/assets/js/97.b415b389.js"><link rel="prefetch" href="/quickly_system/assets/js/98.caf36d30.js"><link rel="prefetch" href="/quickly_system/assets/js/99.bc418844.js">
    <link rel="stylesheet" href="/quickly_system/assets/css/0.styles.40d4803a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/quickly_system/" class="home-link router-link-active"><!----> <span class="site-name">拓甫网络科技</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/quickly_system/home/standard/Vscode.html" class="nav-link">
  指南
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/quickly_system/home/standard/Vscode.html" class="nav-link">
  指南
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>规范</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/quickly_system/home/standard/Vscode.html" class="sidebar-link">Vscode配置</a></li><li><a href="/quickly_system/home/standard/address.html" class="sidebar-link">工具及地址</a></li><li><a href="/quickly_system/home/standard/codeOne.html" class="sidebar-link">前端代码规范第一版</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>项目框架</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/quickly_system/home/framework/show.html" class="sidebar-link">pc展示端</a></li><li><a href="/quickly_system/home/framework/manage.html" class="sidebar-link">pc后台管理端</a></li><li><a href="/quickly_system/home/framework/power.html" class="sidebar-link">权限管理系统脚手架</a></li><li><a href="/quickly_system/home/framework/mobile.html" class="sidebar-link">移动端</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>技术栈</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/quickly_system/home/technologyStack/vue" class="sidebar-heading clickable open"><span>vue</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/quickly_system/home/technologyStack/vue/exspsheet.html" class="sidebar-link">exspsheet(在线excel)</a></li><li><a href="/quickly_system/home/technologyStack/vue/collapse.html" class="sidebar-link">collapse(展开收缩)</a></li><li><a href="/quickly_system/home/technologyStack/vue/pagination.html" class="sidebar-link">pagination(分页)</a></li><li><a href="/quickly_system/home/technologyStack/vue/responsive.html" class="sidebar-link">响应式组件(适用pc)</a></li><li><a href="/quickly_system/home/technologyStack/vue/wangeditor.html" class="sidebar-link">wangeditor</a></li><li><a href="/quickly_system/home/technologyStack/vue/onLinePdf.html" class="sidebar-link">iframe在线pdf</a></li></ul></section></li><li><a href="/quickly_system/home/technologyStack/nuxt.html" class="sidebar-link">Nuxt</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>图表</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/quickly_system/home/chart/echarts" class="sidebar-heading clickable open"><span>echarts</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/quickly_system/home/chart/echarts/bar.html" class="sidebar-link">柱状图</a></li></ul></section></li><li><a href="/quickly_system/home/chart/highCharts.html" class="sidebar-link">highCharts</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/quickly_system/home/chart/datav" class="sidebar-heading clickable"><span>datav</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>大屏</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>大屏展示</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/quickly_system/home/screen/show/show1.html" class="sidebar-link">样式1</a></li><li><a href="/quickly_system/home/screen/show/show2.html" class="sidebar-link">样式2</a></li></ul></section></li><li><a href="/quickly_system/home/screen/list.html" class="sidebar-link">列表类</a></li><li><a href="/quickly_system/home/screen/chart.html" class="sidebar-link">图表类</a></li><li><a href="/quickly_system/home/screen/interaction.html" class="sidebar-link">交互类</a></li><li><a href="/quickly_system/home/screen/dynamicEffect.html" class="sidebar-link">动效类</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>地图</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/quickly_system/home/map/arcGis.html" class="sidebar-link">arcGis地图</a></li><li><a href="/quickly_system/home/map/leafLet.html" class="sidebar-link">leafLet地图</a></li><li><a href="/quickly_system/home/map/openLayer.html" class="sidebar-link">openLayer地图</a></li><li><a href="/quickly_system/home/map/superMap.html" class="sidebar-link">superMap地图</a></li><li><a href="/quickly_system/home/map/scott.html" class="sidebar-link">高德地图</a></li><li><a href="/quickly_system/home/map/baidu.html" class="sidebar-link">百度地图</a></li><li><a href="/quickly_system/home/map/other.html" class="sidebar-link">其他地图</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>UI组件库</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/quickly_system/home/component/ElementUI.html" class="sidebar-link">ElementUI</a></li><li><a href="/quickly_system/home/component/iview.html" class="sidebar-link">iview</a></li><li><a href="/quickly_system/home/component/bootstrap.html" class="sidebar-link">bootstrap</a></li><li><a href="/quickly_system/home/component/vant.html" class="sidebar-link">vant</a></li><li><a href="/quickly_system/home/component/AntDesignVue.html" class="sidebar-link"> Ant design vue</a></li></ul></section></li><li><a href="/quickly_system/home/javascript/" class="sidebar-link">javascript</a></li><li><a href="/quickly_system/home/jQuery/" class="sidebar-link">jQuery</a></li><li><a href="/quickly_system/home/style/" class="sidebar-link">样式类</a></li><li><section class="sidebar-group depth-0"><a href="/quickly_system/home/other/" class="sidebar-heading clickable router-link-active open"><span>其他类</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/quickly_system/home/other/git.html" class="sidebar-link">git</a></li><li><a href="/quickly_system/home/other/performance.html" aria-current="page" class="active sidebar-link">前端性能优化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/quickly_system/home/other/performance.html#一、页面加载及渲染过程优化" class="sidebar-link">一、页面加载及渲染过程优化</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="前端性能优化篇"><a href="#前端性能优化篇" class="header-anchor">#</a> 前端性能优化篇</h1> <p>从用户的角度而言，对一个网站的第一印象往往是网站的打开速度，速度越快，用户体验越好。 首屏作为直面用户的第一屏，其重要性不言而喻。优化
用户体验是前端非常重要的一部分。本文主要从网页渲染过程、网页交互以及 Vue 应用优化三个角度对性能优化做一个小结。</p> <h2 id="一、页面加载及渲染过程优化"><a href="#一、页面加载及渲染过程优化" class="header-anchor">#</a> 一、页面加载及渲染过程优化</h2> <p>浏览器渲染过程</p> <p><img src="/quickly_system/assets/img/htmlRender.7139185e.jpeg" alt=""></p> <p>1、浏览器通过请求 URL 进行域名解析，向服务器发出请求，服务器将 html 文件发送到客户端。</p> <p>2、浏览器拿到 html 文件后首先要载入 html 标签，然后在 html 标签的 head 标签中找到我们设置的 meta 和引入的 css</p> <p>3、加载 css 文件时，浏览器又会向服务器发起请求，服务器收到请求后返回 css 文件，并加载它</p> <p>4、加载 body 标签中的内容，开始渲染 dom；</p> <p>5、浏览器找到 script 标签加载 js 文件，根据位置决定顺序，也可能在 body 先加载。如果 js 操作了 dom，重新渲染 dom；</p> <p>6、直到找到&lt;/html&gt;后加载完成</p> <h3 id="crp-关键渲染路径-critical-rendering-path-优化"><a href="#crp-关键渲染路径-critical-rendering-path-优化" class="header-anchor">#</a> CRP（关键渲染路径 Critical Rendering Path）优化</h3> <p>关键渲染路径是浏览器将 HTML、CSS、JavaScript 转换为在屏幕上呈现的像素内容所经历的一系列步骤。也就是我们刚刚提到的的的浏览器渲染流程。</p> <p>为尽快完成首次渲染，我们需要最大限度减小以下三种可变因素:</p> <ul><li>关键资源的数量: 可能阻止网页首次渲染的资源。</li> <li>关键路径长度: 获取所有关键资源所需的往返次数或总时间。</li> <li>关键字节: 实现网页首次渲染所需的总字节数，等同于所有关键资源传送文件大小的总和。</li></ul> <h3 id="优化-dom"><a href="#优化-dom" class="header-anchor">#</a> 优化 DOM</h3> <ul><li>删除不必要的代码和注释包括空格，尽量做到最小化文件。</li> <li>可以利用 GZIP 压缩文件。</li> <li>结合 HTTP 缓存文件。</li></ul> <h3 id="优化-cssom"><a href="#优化-cssom" class="header-anchor">#</a> 优化 CSSOM</h3> <p>首先，DOM 和 CSSOM 通常是并行构建的，所以 CSS 加载不会阻塞 DOM 的解析。</p> <p>然而，由于 Render Tree 是依赖于 DOM Tree 和 CSSOM Tree 的，
所以他必须等待到 CSSOM Tree 构建完成，也就是 CSS 资源加载完成(或者 CSS 资源加载失败)后，才能开始渲染。因此，CSS 加载会阻塞 Dom 的渲染。</p> <p>由此可见，对于 CSSOM 缩小、压缩以及缓存同样重要，我们可以从这方面考虑去优化。</p> <ul><li>减少关键 CSS 元素数量</li> <li>当我们声明样式表时，请密切关注媒体查询的类型，它们极大地影响了 CRP 的性能 。</li></ul> <h3 id="优化-javascript"><a href="#优化-javascript" class="header-anchor">#</a> 优化 JavaScript</h3> <p>当浏览器遇到 script 标记时，会阻止解析器继续操作，直到 CSSOM 构建完毕，JavaScript 才会运行并继续完成 DOM 构建过程。</p> <ul><li>async:异步脚本 当我们在 script 标记添加 async 属性以后，浏览器遇到这个 script 标记时会继续解析 DOM，同时脚本也不会被 CSSOM 阻止，即不会阻止 CRP。</li> <li>defer:延迟脚本 与 async 的区别在于，异步脚本无法保证证能按照它们出现的次序执行。脚本需要等到文档解析后（ DOMContentLoaded 事件前）执行，而 async 允许脚本在文档解析时位于后台运行（两者下载的过程不会阻塞 DOM，但执行会）。</li> <li>当我们的脚本不会修改 DOM 或 CSSOM 时，推荐使用 async 。</li></ul> <h3 id="浏览器的回流与重绘"><a href="#浏览器的回流与重绘" class="header-anchor">#</a> 浏览器的回流与重绘</h3> <p>回流必出发重绘，重绘不一定会引起回流。</p> <h4 id="重绘-repaint"><a href="#重绘-repaint" class="header-anchor">#</a> 重绘（Repaint）</h4> <p>当页面中元素样式的改变并不影响它在文档流中的位置时（例如：color、background-color、visibility 等），浏览器会将新样式赋予给元素并重新绘制它，这个过程称为重绘。</p> <h4 id="回流-reflow"><a href="#回流-reflow" class="header-anchor">#</a> 回流（Reflow）</h4> <p>当 Render Tree 中部分或全部元素的尺寸、结构、或某些属性发生改变时，浏览器重新渲染部分或全部文档的过程称为回流。</p> <h4 id="会导致回流的操作"><a href="#会导致回流的操作" class="header-anchor">#</a> 会导致回流的操作：</h4> <ul><li>页面首次渲染</li> <li>浏览器窗口大小发生改变</li> <li>元素尺寸或位置发生改变元素内容变化（文字数量或图片大小等等）</li> <li>元素字体大小变化</li> <li>添加或者删除可见的 DOM 元素</li> <li>激活 CSS 伪类（例如:hover）</li> <li>查询某些属性或调用某些方法</li> <li>一些常用且会导致回流的属性和方法
clientWidth、clientHeight、clientTop、clientLeftoffsetWidth、offsetHeight、offsetTop、offsetLeftscrollWidth、scrollHeight、scrollTop、scrollLeftscrollIntoView()、scrollIntoViewIfNeeded()、getComputedStyle()、
getBoundingClientRect()、scrollTo()</li></ul> <h4 id="性能影响"><a href="#性能影响" class="header-anchor">#</a> 性能影响</h4> <p>回流比重绘代价更大</p> <p>有时即使仅仅回流一个单一的元素，它的父元素以及任何跟随它的元素也会产生回流。现代浏览器会对频繁的回流或重绘操作进行优化：浏览器会维护一个队列，把所有引起回流和重绘的操作放入队列中，如果队列中的任务数量或者时间间隔达到一个阈值的，浏览器就会将队列清空，进行一次批处理，这样可以把多次回流和重绘变成一次。</p> <p>当你访问以下属性或方法时，浏览器会立刻清空队列:</p> <div class="language-css extra-class"><pre class="language-css"><code>clientWidth、clientHeight、clientTop、clientLeft
offsetWidth、offsetHeight、offsetTop、offsetLeft
scrollWidth、scrollHeight、scrollTop、scrollLeft
width、height
<span class="token function">getComputedStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="如何避免"><a href="#如何避免" class="header-anchor">#</a> 如何避免</h4> <h5 id="css"><a href="#css" class="header-anchor">#</a> CSS</h5> <ul><li>避免使用 table 布局。</li> <li>尽可能在 DOM 树的最末端改变 class。</li> <li>避免设置多层内联样式。</li> <li>将动画效果应用到 position 属性为 absolute 或 fixed 的元素上。</li> <li>避免使用 CSS 表达式（例如：calc()）。</li></ul> <h5 id="javascript"><a href="#javascript" class="header-anchor">#</a> JavaScript</h5> <ul><li>避免频繁操作样式，最好一次性重写 style 属性，或者将样式列表定义为 class 并一次性更改 class 属性。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 优化前</span>
<span class="token keyword">const</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>borderLeft <span class="token operator">=</span> <span class="token string">'1px'</span><span class="token punctuation">;</span>
el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>borderRight <span class="token operator">=</span> <span class="token string">'2px'</span><span class="token punctuation">;</span>
el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>padding <span class="token operator">=</span> <span class="token string">'5px'</span><span class="token punctuation">;</span>
<span class="token comment">// 优化后,一次性修改样式，这样可以将三次重排减少到一次重排</span>
<span class="token keyword">const</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssText <span class="token operator">+=</span> <span class="token string">'; border-left: 1px ;border-right: 2px; padding: 5px;'</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>避免频繁操作 DOM，创建一个 documentFragment，在它上面应用所有 DOM 操作，最后再把它添加到文档中。</li> <li>也可以先为元素设置 display: none，操作结束后再把它显示出来。因为在 display 属性为 none 的元素上进行的 DOM 操作不会引发回流和重绘。</li> <li>避免频繁读取会引发回流/重绘的属性，如果确实需要多次使用，就用一个变量缓存起来。</li> <li>对具有复杂动画的元素使用绝对定位，使它脱离文档流，否则会引起父元素及后续元素频繁回流。</li></ul> <h4 id="图片懒加载"><a href="#图片懒加载" class="header-anchor">#</a> 图片懒加载</h4> <p>图片懒加载在一些图片密集型的网站中运用比较多，通过图片懒加载可以让一些不可视的图片不去加载，避免一次性加载过多的图片导致请求阻塞（浏览器一般对同一域名下的并发请求的连接数有限制），这样就可以提高网站的加载速度，提高用户体验。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/quickly_system/home/other/git.html" class="prev">
        git
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/quickly_system/assets/js/app.e19d83fd.js" defer></script><script src="/quickly_system/assets/js/4.e9443f23.js" defer></script><script src="/quickly_system/assets/js/33.87f72572.js" defer></script>
  </body>
</html>
